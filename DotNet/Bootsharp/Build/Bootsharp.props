<Project>

    <PropertyGroup>

        <!-- Project defaults common to the build target. -->
        <OutputType>Exe</OutputType>
        <Configuration>Release</Configuration>
        <TargetArchitecture>wasm</TargetArchitecture>
        <TargetOS>browser</TargetOS>
        <RuntimeIdentifier>browser-wasm</RuntimeIdentifier>
        <InvariantTimezone>true</InvariantTimezone>
        <InvariantGlobalization>true</InvariantGlobalization>
        <WasmStripILAfterAOT>true</WasmStripILAfterAOT>
        <WasmGenerateAppBundle>true</WasmGenerateAppBundle>
        <WasmEnableLegacyJsInterop>false</WasmEnableLegacyJsInterop>

        <!-- Bootsharp public defaults. -->
        <!-- Name of the generated JavaScript module; 'bootsharp' by default. -->
        <BootsharpName>bootsharp</BootsharpName>
        <!-- Whether to embed binaries to the JavaScript module file (true or false); true by default. -->
        <BootsharpEmbedBinaries>true</BootsharpEmbedBinaries>
        <!-- Directory (relative to base output) to publish generated JavaScript module; 'base-output/module-name' by default. -->
        <BootsharpPublishDirectory>$(BootsharpName)</BootsharpPublishDirectory>
        <!-- Directory (relative to base output) to publish type declarations; 'publish-dir/types' by default. -->
        <BootsharpTypesDirectory>$(BootsharpPublishDirectory)/types</BootsharpTypesDirectory>
        <!-- Directory (relative to base output) to publish binaries when 'EmbedBinaries' disabled; 'publish-dir/bin' by default. -->
        <BootsharpBinariesDirectory>$(BootsharpPublishDirectory)/bin</BootsharpBinariesDirectory>
        <!-- Directory (relative to base output) to publish 'package.json' file; same as publish directory by default. -->
        <BootsharpPackageDirectory>$(BootsharpPublishDirectory)</BootsharpPackageDirectory>
        <!-- Whether to disable some .NET features to reduce binary size (true or false); true by default. -->
        <BootsharpAggressiveTrimming>true</BootsharpAggressiveTrimming>

    </PropertyGroup>

    <Choose>
        <When Condition="$(BootsharpAggressiveTrimming)">
            <PropertyGroup>
                <!-- https://learn.microsoft.com/en-us/aspnet/core/blazor/performance?#minimize-app-download-size -->
                <!-- https://raw.githubusercontent.com/dotnet/runtime/main/docs/workflow/trimming/feature-switches.md -->
                <PublishTrimmed>true</PublishTrimmed>
                <TrimMode>full</TrimMode>
                <TrimmerRemoveSymbols>true</TrimmerRemoveSymbols>
                <_AggressiveAttributeTrimming>true</_AggressiveAttributeTrimming>
                <AutoreleasePoolSupport>false</AutoreleasePoolSupport>
                <DebuggerSupport>false</DebuggerSupport>
                <EnableCppCLIHostActivation>false</EnableCppCLIHostActivation>
                <EnableUnsafeBinaryFormatterSerialization>false</EnableUnsafeBinaryFormatterSerialization>
                <EnableUnsafeBinaryFormatterInDesigntimeLicenseContextSerialization>false</EnableUnsafeBinaryFormatterInDesigntimeLicenseContextSerialization>
                <EnableUnsafeUTF7Encoding>false</EnableUnsafeUTF7Encoding>
                <_EnableConsumingManagedCodeFromNativeHosting>false</_EnableConsumingManagedCodeFromNativeHosting>
                <EventSourceSupport>false</EventSourceSupport>
                <HttpActivityPropagationSupport>false</HttpActivityPropagationSupport>
                <MetadataUpdaterSupport>false</MetadataUpdaterSupport>
                <UseNativeHttpHandler>true</UseNativeHttpHandler>
                <UseSystemResourceKeys>true</UseSystemResourceKeys>
                <StartupHookSupport>false</StartupHookSupport>
                <CustomResourceTypesSupport>false</CustomResourceTypesSupport>
                <BuiltInComInteropSupport>false</BuiltInComInteropSupport>
                <WasmEmitSourceMap>false</WasmEmitSourceMap>
                <WasmNativeDebugSymbols>false</WasmNativeDebugSymbols>
            </PropertyGroup>
        </When>
    </Choose>

    <ItemGroup>
        <AssemblyAttribute Include="System.Runtime.Versioning.SupportedOSPlatform">
            <_Parameter1>browser</_Parameter1>
        </AssemblyAttribute>
    </ItemGroup>

</Project>
